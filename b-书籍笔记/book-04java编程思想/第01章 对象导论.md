# 第一章 对象导论

## 1.1抽象过程

程序员必须建立起在机器模型(位于“解空间内”，这是对问题建模的地方，例如计算机)和实际待解问题的模型(位于“问题空间”内，这是问题存在的地方，例如一项业务)之间的关联。

程序员可以通过添加新类型的对象使自身使用于某个特定问题。因此，当你在阅读描述解决方案的代码的同时，也是在阅读问题的表述。

OOP允许根据问题来描述问题，而不是根据运行解决方案的计算机类描述问题。

纯粹的面向对象程序设计方式：

1. **万物皆对象**。将对象视为奇特的变量，它可以存储数据，除此之外，你还可以要求它在自身上执行操作。理论上来讲，你可以抽取待解问题的任何概念化构建(狗、建筑物、服务等)，将其表示为程序中的对象。
2. **程序是对象的集合，它们可以发送消息来告知彼此所要做的。**要请求一个对象，就必须对该对象发送一条消息。更具体的说，可以把消息想象为对某个特定对象的方法的调用请求。
3. **每个对象都有自己的由其他对象所构成的存储。**换句话说，可以通过创建包含现有对象的方式来创建新类型的对象。因此，可以在程序中构建复杂的体系，同时将其复杂性隐藏在对象的简单性背后。
4. **每个对象都拥有其类型。**每个对象都是某个类的一个实例，这里的类就是类型的意思。每个类最重要的区别于其他类的特性就是“可以发送什么消息给它“。
5. **某一个特定类型的所有对象都可以接受同样的消息。**因为“圆形”类型的对象同时也是“几何形”类型的对象，所以一个“圆形”对象同时也是“几何形”类型的对象，所以一个“圆形”对象必定能够接受发送给“几何形”对象的消息。这意味着可以编写“几何形”交互并自动处理所有与几何形性质相关的事务的代码。这种**可替代性(substitutability)**是OOP中最强有力的概念之一。

**对象具有状态、行为和标识。**这意味着每一个对象都可以拥有内部数据(它们给出了该对象的状态)和行为(它们产生行为)，并且每一个对象都可以唯一地与其他对象区分开，具体来说，每一个对象的内存中都有一个唯一地地址。

## 1.2每个对象都有一个接口

所有的对象都是唯一的，但同时也是具有相同的特性和行为的对象所属的类的一部分。

创建抽象数据类型(类)是面向对象程序设计的基本概念之一。

每一个对象属于定义了特性和行为的某个特定的类。

类描述了具有相同特性(数据元素)和行为(功能)的对象集合，所以一个类实际上就是一个数据类型。

面向对象程序设计的挑战之一，就是在问题空间的元素和解空间的对象之间创建一对一的映射。

## 1.3 每个对象都提供服务

当试图开发和理解一个程序设计时，最好的方法之一就是将对象想象为“服务提供者”。程序本身将向用户提供服务，它将通过调用其他对象提供的服务来实现这一目的。你的目标就是去创建(或者是最是在代码库中寻找)能够提供理想服务来解决问题的一系列对象。

将对象看做是服务提供者还有一个附带的好处：它有助于提高对象的的内聚性。

**高内聚**是软件设计的基本要求之一：这意味着一个软件构建(例如一个对象，当然它也有可能是指一个方法或者一个对象库)的各个方面“组合”的很好。

**在良好的面向对象设计中，每个对象都可以很好地完成任一项务，但是它并不试图做更多的事。**

## 1.4 被隐藏的具体实现

将开发人员分按角色分为**类创建者**（那些创建爱你新数据类型的程序员）和**客户端程序员**（那些在其他应用中使用数据类型的类消费者）是大有裨益的。客户端程序员的目标是收集各种用来快速应用开发的类。类创建者的目标是构建类，这种类只能向客户端程序员暴露必须的部分，而隐藏其他部分。

访问控制第一个存在的原因就是让客户端程序员无法触及他们不应该触及的部分——这些部分对数据类型的内部操作来说是必须的，但并不是用户解决待定问题所需的接口的一部分。

访问控制的第二个原因就是允许库设计者可以改变类内部的工作方式而不用担心会影响到客户端程序员。即：如果接口和实现可以清晰的分离并得以保护，可以再修改实现时不会影响到客户端程序员的正常使用。

java用三个关键字在类的内部设定边界：**public、private、protected**。这些访问制定词(access specifier)决定了紧跟其后被定义的东西的可以被谁使用。public 表示紧随其后的元素对任何人都是可用的，而private这个关键字表示除类型创建者和类的内部方法之外的任何人都不能访问的元素。private就像你与客户端程序员之间的一堵墙，如果有人试图访问private成员，就会在程序编译时得到错误信息。protected关键字声明的变量和方法可以被类内部的方法、和定义类在同一个包中的类和其子类访问。

Java中还有一种默认的访问权限，当没有使用前面的三种修饰符时，为默认访问权限，也成包访问权限，在这种权限下，类可以访问在同一个包（库构建）中的其他成员，但在包之外，这些成员如同指定了private一样。

**public=>pretected=default(friendly)=>private**

## 1.5 复用具体实现

代码复用是面向对象程序设计语言所提供的最了不起的优点之一。

最简单的复用某个类的方式就是直接使用该类的对象，此外也可以将那个类的一个对象置于某个新类中(创建成员对象)。新的类可以由任意数量、任意类型的其他对象以任意可以实现新的类中所想要的功能的方式组成。这种概念被称为**组合(composition)**，如果组合是动态发生的，那么它称为**聚合(aggregation)**。组合经常被视为"has-a"(拥有)关系。

组合带来了巨大的灵活性。新类的成员对象通常都被定义为private，使得使用新类的客户端程序员不能访问它们。这也使得你可以在不干扰现有客户端代码的情况下，修改这些成员。也可以在运行时修改这些成员对象，已实现动态修改程序的行为。而继承并不具备这样的灵活性，因为编译器必须通过继承而创建的类施加编译时的限制。

在创建新类时应该首先考虑组合，因为它更加简单灵活。

## 1.6 继承

类型不仅仅只是描述了作用于一个对象集合上的及约束条件，同时还有与其他类型之间的关系。这两个类可以有相同的特性和行为，但是其中一个类型可能比另一个含有更多的特性，并且可以处理更多消息(或以不同的方式来处理消息)。继承使用基类型和导出类型的概念表示这种类型之间的相似性。一个基类型包含所有导出类型所共享的特性和行为。可以创建一个基类型来表示系统中某些对象的核心概念，从基类型中导出其他类型，来表示此核心可以被实现的各种不同方式。